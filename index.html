<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Categorized To-Do List</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>
  <div id="app">
    <header>
      <h1>üìã Categorized To-Do List</h1>
      <nav>
        <button id="nav-hub" class="nav-btn" aria-label="View Hub">Hub</button>
        <button id="nav-tasks" class="nav-btn" aria-label="View Tasks">Tasks</button>
        <button id="nav-projects" class="nav-btn" aria-label="View Projects">Projects</button>
        <button id="nav-calendar" class="nav-btn active" aria-label="View Calendar">Calendar</button>
        <button id="nav-settings" class="nav-btn" aria-label="View Settings">Settings</button>
      </nav>
    </header>
    
    <main id="main-content">
      <!-- Hub View -->
      <section id="hub-view" class="view">
        <!-- Weekly Review Section -->
        <div id="hub-weekly-review-container" class="weekly-review-section"></div>
        
        <!-- Analytics Grid -->
        <div class="analytics-grid">
          <div id="hub-progress-analytics-container" class="progress-analytics-section"></div>
          <div id="hub-habit-heatmap-container" class="habit-heatmap-section"></div>
        </div>
        
        <!-- Identity Goals Section -->
        <div id="hub-identity-goals-container" class="identity-goals-section"></div>
      </section>

      <!-- Tasks View -->
      <section id="tasks-view" class="view">
        <!-- Input Form -->
        <div class="input-section">
          <form id="item-form" class="item-form">
            <div class="input-main">
              <input 
                type="text" 
                id="description-input" 
                placeholder="What do you need to do or remember?" 
                aria-label="Task or note description"
                required
              >
              <button type="submit" class="add-btn" aria-label="Add item">
                <span>Add</span>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="12" y1="5" x2="12" y2="19"></line>
                  <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
              </button>
            </div>
            
            <!-- Quick Category Buttons -->
            <div class="quick-categories" id="quick-categories">
              <span class="quick-cat-label">Quick add:</span>
              <button type="button" class="quick-cat-btn" data-category="self-care" title="Self Care">üßò</button>
              <button type="button" class="quick-cat-btn" data-category="exercise" title="Exercise">üèÉ</button>
              <button type="button" class="quick-cat-btn" data-category="work" title="Work">üíº</button>
              <button type="button" class="quick-cat-btn" data-category="friends-social" title="Friends/Social">üë•</button>
              <button type="button" class="quick-cat-btn" data-category="tasks" title="Tasks">üìù</button>
              <button type="button" class="quick-cat-btn" data-category="important-priority" title="Important">üî¥</button>
              <button type="button" class="quick-cat-btn" data-category="partner" title="Partner">üíï</button>
              <button type="button" class="quick-cat-btn" data-category="knowledge-hub" title="Knowledge Hub">üí°</button>
            </div>
            
            <div class="input-suggestion" id="category-suggestion" style="display: none;">
              Suggested: <span id="suggested-category"></span>
            </div>

            <details class="optional-fields">
              <summary>More options</summary>
              <div class="optional-fields-content">
                <div class="field-group">
                  <label for="category-select">Category</label>
                  <select id="category-select" aria-label="Select category">
                    <option value="">Auto-detect</option>
                  </select>
                </div>
                <div class="field-group">
                  <label for="due-date-input">Due Date</label>
                  <input type="date" id="due-date-input" aria-label="Due date">
                </div>
                <div class="field-group">
                  <label for="effort-level-select">Effort Level</label>
                  <select id="effort-level-select" aria-label="Effort level">
                    <option value="">Normal</option>
                    <option value="quick">‚ö° Quick (2-min)</option>
                    <option value="medium">Medium</option>
                    <option value="long">Long</option>
                  </select>
                </div>
                <div class="field-group">
                  <label for="priority-select">Priority</label>
                  <select id="priority-select" aria-label="Priority">
                    <option value="normal">Normal</option>
                    <option value="daily-focus">üéØ Daily Focus</option>
                    <option value="low">Low</option>
                  </select>
                </div>
                <div class="field-group">
                  <label for="location-input">Location</label>
                  <input type="text" id="location-input" placeholder="Optional location" aria-label="Location">
                </div>
                <div class="field-group">
                  <label for="tags-input">Tags (comma-separated)</label>
                  <input type="text" id="tags-input" placeholder="tag1, tag2" aria-label="Tags">
                </div>
                <div class="field-group checkbox-group">
                  <label>
                    <input type="checkbox" id="is-habit-checkbox" aria-label="Mark as habit">
                    <span>üîÑ Track as Habit</span>
                  </label>
                </div>
              </div>
              
              <!-- Implementation Intention (Phase 2) -->
              <details class="implementation-section">
                <summary>‚è∞ Implementation Intention (When/Where/How)</summary>
                <div class="implementation-fields">
                  <div class="field-group">
                    <label for="intention-time">What time?</label>
                    <input type="time" id="intention-time" placeholder="e.g., 7:00 AM">
                  </div>
                  <div class="field-group">
                    <label for="intention-location">Where?</label>
                    <input type="text" id="intention-location" placeholder="e.g., Kitchen, Gym">
                  </div>
                  <div class="field-group">
                    <label for="intention-duration">How long? (minutes)</label>
                    <input type="number" id="intention-duration" placeholder="e.g., 10" min="1">
                  </div>
                </div>
              </details>
              
              <!-- Habit Stacking (Phase 2) -->
              <details class="habit-stack-section">
                <summary>üîó Habit Stacking</summary>
                <div class="habit-stack-fields">
                  <div class="field-group">
                    <label for="stack-after-habit">After which habit?</label>
                    <select id="stack-after-habit">
                      <option value="">Select a habit...</option>
                    </select>
                  </div>
                  <div class="stack-preview" id="stack-preview" style="display: none;">
                    <p><strong>After I</strong> <span id="stack-trigger"></span>, <strong>I will</strong> <span id="stack-action"></span></p>
                  </div>
                </div>
              </details>
            </details>
          </form>
        </div>

        <!-- Daily Focus Section -->
        <div id="daily-focus-container" class="daily-focus-section"></div>

        <!-- Habit Tracker & Quick Wins Row -->
        <div class="habits-quick-row">
          <div id="habit-tracker-container" class="habit-tracker-section"></div>
          <div id="quick-wins-container" class="quick-wins-section"></div>
        </div>
        
        <!-- Habit Templates Section -->
        <div id="habit-templates-container" class="habit-templates-section"></div>

        <!-- Daily Progress Ring -->
        <div class="progress-section">
          <div class="progress-ring-container">
            <svg class="progress-ring" width="80" height="80">
              <circle class="progress-ring-bg" cx="40" cy="40" r="35" />
              <circle class="progress-ring-fill" id="progress-ring-fill" cx="40" cy="40" r="35" />
            </svg>
            <div class="progress-text">
              <span id="progress-percent">0%</span>
            </div>
          </div>
          <div class="progress-info">
            <span class="progress-label">Today's Progress</span>
            <span class="progress-detail" id="progress-detail">0 of 0 tasks</span>
          </div>
        </div>

        <!-- Filters -->
        <div class="filters-section">
          <div class="filter-group">
            <input 
              type="search" 
              id="search-input" 
              placeholder="Search items..." 
              aria-label="Search items"
            >
          </div>
          <div class="filter-group">
            <select id="filter-category" aria-label="Filter by category">
              <option value="">All Categories</option>
            </select>
          </div>
          <div class="filter-group">
            <select id="filter-status" aria-label="Filter by status">
              <option value="">All Status</option>
              <option value="incomplete">Incomplete</option>
              <option value="completed">Completed</option>
            </select>
          </div>
          <div class="filter-group">
            <select id="sort-option" aria-label="Sort by">
              <option value="createdAt">Newest First</option>
              <option value="dueDate">Due Date</option>
              <option value="description">Alphabetical</option>
            </select>
          </div>
        </div>

        <!-- Items List -->
        <div class="items-container">
          <div class="tasks-column">
            <h3 class="column-header">üìã Tasks</h3>
            <div id="items-list" class="items-list" role="list" aria-label="Tasks list">
              <div class="empty-state" id="empty-state">
                <div class="empty-illustration">
                  <svg width="120" height="120" viewBox="0 0 120 120" fill="none">
                    <circle cx="60" cy="60" r="50" fill="#f0f0f0"/>
                    <rect x="35" y="40" width="50" height="8" rx="4" fill="#ddd"/>
                    <rect x="35" y="55" width="40" height="8" rx="4" fill="#ddd"/>
                    <rect x="35" y="70" width="45" height="8" rx="4" fill="#ddd"/>
                    <circle cx="25" cy="44" r="4" fill="#9370DB"/>
                    <circle cx="25" cy="59" r="4" fill="#32CD32"/>
                    <circle cx="25" cy="74" r="4" fill="#4169E1"/>
                  </svg>
                </div>
                <h3>No tasks yet!</h3>
                <p>Add your first task above to get started.</p>
                <p class="empty-hint">üí° Try typing "gym tomorrow" or "call mom"</p>
              </div>
            </div>
          </div>
          
          <div class="knowledge-column">
            <h3 class="column-header">üí° Knowledge Hub</h3>
            <div id="knowledge-list" class="items-list" role="list" aria-label="Knowledge Hub list">
              <div class="empty-state" id="knowledge-empty-state">
                <div class="empty-illustration">
                  <svg width="80" height="80" viewBox="0 0 80 80" fill="none">
                    <circle cx="40" cy="40" r="35" fill="#e0f2f1"/>
                    <circle cx="40" cy="35" r="12" fill="#20B2AA"/>
                    <rect x="38" y="50" width="4" height="12" rx="2" fill="#20B2AA"/>
                  </svg>
                </div>
                <p>Save notes, ideas & references here</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Calendar View -->
      <section id="calendar-view" class="view active">
        <div class="calendar-view-header">
          <h2>üìÖ Calendar</h2>
          <p class="calendar-subtitle">View your tasks across months</p>
        </div>
        <div id="calendar-container" class="calendar-container"></div>
      </section>

      <!-- Projects View -->
      <section id="projects-view" class="view">
        <div id="projects-container"></div>
      </section>

      <!-- Settings View -->
      <section id="settings-view" class="view">
        <div id="settings-container"></div>
      </section>
    </main>

    <!-- Confetti Canvas -->
    <canvas id="confetti-canvas"></canvas>

    <!-- Edit Modal -->
    <div id="edit-modal" class="modal" role="dialog" aria-labelledby="edit-modal-title" aria-hidden="true">
      <div class="modal-content">
        <h2 id="edit-modal-title">Edit Item</h2>
        <form id="edit-form">
          <input type="hidden" id="edit-item-id">
          <div class="field-group">
            <label for="edit-description">Description</label>
            <input type="text" id="edit-description" required>
          </div>
          <div class="field-group">
            <label for="edit-category">Category</label>
            <select id="edit-category"></select>
          </div>
          <div class="field-group">
            <label for="edit-due-date">Due Date</label>
            <input type="date" id="edit-due-date">
          </div>
          <div class="field-group">
            <label for="edit-effort-level">Effort Level</label>
            <select id="edit-effort-level">
              <option value="">Normal</option>
              <option value="quick">‚ö° Quick (2-min)</option>
              <option value="medium">Medium</option>
              <option value="long">Long</option>
            </select>
          </div>
          <div class="field-group">
            <label for="edit-priority">Priority</label>
            <select id="edit-priority">
              <option value="normal">Normal</option>
              <option value="daily-focus">üéØ Daily Focus</option>
              <option value="low">Low</option>
            </select>
          </div>
          <div class="field-group">
            <label for="edit-location">Location</label>
            <input type="text" id="edit-location">
          </div>
          <div class="field-group">
            <label for="edit-tags">Tags (comma-separated)</label>
            <input type="text" id="edit-tags">
          </div>
          <div class="field-group checkbox-group">
            <label>
              <input type="checkbox" id="edit-is-habit">
              <span>üîÑ Track as Habit</span>
            </label>
          </div>
          
          <div class="field-group">
            <label for="edit-intention-time">Implementation Time</label>
            <input type="time" id="edit-intention-time">
          </div>
          <div class="field-group">
            <label for="edit-intention-location">Implementation Location</label>
            <input type="text" id="edit-intention-location" placeholder="e.g., Kitchen">
          </div>
          <div class="field-group">
            <label for="edit-intention-duration">Duration (minutes)</label>
            <input type="number" id="edit-intention-duration" placeholder="e.g., 10" min="1">
          </div>
          <div class="field-group">
            <label for="edit-stack-after">Stack After Habit</label>
            <select id="edit-stack-after">
              <option value="">None</option>
            </select>
          </div>
          <div class="modal-actions">
            <button type="button" class="btn-secondary" id="cancel-edit">Cancel</button>
            <button type="submit" class="btn-primary">Save Changes</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container" class="toast-container" aria-live="polite"></div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script type="module" src="/src/main.ts"></script>
</body>
</html>
